# EdgeVPN ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥

## 1. æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰äº† EdgeVPN é¡¹ç›®çš„ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥ï¼ŒåŒ…æ‹¬åˆ†æ”¯ç®¡ç†ç­–ç•¥ã€ä»£ç åˆå¹¶æµç¨‹åŠç‰ˆæœ¬å·å‘½åè§„åˆ™ã€‚è‰¯å¥½çš„ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥æœ‰åŠ©äºå›¢é˜Ÿåä½œã€ä»£ç ç®¡ç†å’Œç‰ˆæœ¬å‘å¸ƒã€‚

## 2. åˆ†æ”¯ç®¡ç†ç­–ç•¥

### 2.1 åˆ†æ”¯æ¨¡å‹

EdgeVPN é‡‡ç”¨ Git Flow åˆ†æ”¯æ¨¡å‹ï¼ŒåŒ…å«ä»¥ä¸‹ä¸»è¦åˆ†æ”¯ï¼š

```mermaid
flowchart TD
    subgraph PROD["ğŸ­ ç”Ÿäº§ç¯å¢ƒ"]
        MAIN["ğŸ“¦ main<br/>ç”Ÿäº§åˆ†æ”¯"]
    end

    subgraph DEV["ğŸ”§ å¼€å‘ç¯å¢ƒ"]
        DEVELOP["ğŸ”¨ develop<br/>å¼€å‘åˆ†æ”¯"]
    end

    subgraph WORK["ğŸ’» å·¥ä½œåˆ†æ”¯"]
        direction LR
        FEATURE["âœ¨ feature/*<br/>åŠŸèƒ½åˆ†æ”¯"]
        HOTFIX["ğŸ› hotfix/*<br/>ä¿®å¤åˆ†æ”¯"]
        RELEASE["ğŸš€ release/*<br/>å‘å¸ƒåˆ†æ”¯"]
    end

    FEATURE -->|"åŠŸèƒ½å®Œæˆ"| DEVELOP
    HOTFIX -->|"ç´§æ€¥ä¿®å¤"| MAIN
    HOTFIX -->|"ä¿®å¤åˆå¹¶"| DEVELOP
    RELEASE -->|"å‘å¸ƒå‡†å¤‡"| DEVELOP
    RELEASE -->|"å‘å¸ƒå®Œæˆ"| MAIN
    DEVELOP -->|"å‘å¸ƒå°±ç»ª"| MAIN

    %% æ ·å¼å®šä¹‰
    classDef mainStyle fill:#E8F5E9,stroke:#388E3C,stroke-width:3px,color:#1B5E20
    classDef devStyle fill:#E3F2FD,stroke:#1976D2,stroke-width:2px,color:#1565C0
    classDef workStyle fill:#FFF3E0,stroke:#F57C00,stroke-width:2px,color:#E65100

    class MAIN mainStyle
    class DEVELOP devStyle
    class FEATURE,HOTFIX,RELEASE workStyle
```

### 2.2 åˆ†æ”¯ç±»å‹

#### 2.2.1 ä¸»åˆ†æ”¯ï¼ˆmainï¼‰

- **ç”¨é€”**ï¼šç”Ÿäº§ç¯å¢ƒä»£ç 
- **ç¨³å®šæ€§**ï¼šç¨³å®šï¼Œå¯éšæ—¶éƒ¨ç½²
- **ä¿æŠ¤**ï¼šå—ä¿æŠ¤ï¼Œç¦æ­¢ç›´æ¥æ¨é€
- **åˆå¹¶**ï¼šä»…ä» release å’Œ hotfix åˆ†æ”¯åˆå¹¶

```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git checkout main
git pull origin main

# æŸ¥çœ‹ä¸»åˆ†æ”¯çŠ¶æ€
git log --oneline -10
```

#### 2.2.2 å¼€å‘åˆ†æ”¯ï¼ˆdevelopï¼‰

- **ç”¨é€”**ï¼šå¼€å‘ç¯å¢ƒä»£ç 
- **ç¨³å®šæ€§**ï¼šç›¸å¯¹ç¨³å®šï¼ŒåŒ…å«å·²å®Œæˆçš„åŠŸèƒ½
- **ä¿æŠ¤**ï¼šå—ä¿æŠ¤ï¼Œç¦æ­¢ç›´æ¥æ¨é€
- **åˆå¹¶**ï¼šä» feature å’Œ release åˆ†æ”¯åˆå¹¶

```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git checkout develop
git pull origin develop

# æŸ¥çœ‹å¼€å‘åˆ†æ”¯çŠ¶æ€
git log --oneline -10
```

#### 2.2.3 åŠŸèƒ½åˆ†æ”¯ï¼ˆfeature/*ï¼‰

- **ç”¨é€”**ï¼šå¼€å‘æ–°åŠŸèƒ½
- **å‘½å**ï¼š`feature/åŠŸèƒ½æè¿°`
- **æ¥æº**ï¼šä» develop åˆ†æ”¯åˆ›å»º
- **åˆå¹¶**ï¼šåˆå¹¶åˆ° develop åˆ†æ”¯

```bash
# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout develop
git pull origin develop
git checkout -b feature/add-ipv6-support

# å¼€å‘åŠŸèƒ½
# ... ç¼–å†™ä»£ç  ...

# æäº¤æ›´æ”¹
git add .
git commit -m "feat(node): add IPv6 support"

# æ¨é€åˆ°è¿œç¨‹
git push -u origin feature/add-ipv6-support
```

#### 2.2.4 ä¿®å¤åˆ†æ”¯ï¼ˆhotfix/*ï¼‰

- **ç”¨é€”**ï¼šä¿®å¤ç”Ÿäº§ç¯å¢ƒçš„ç´§æ€¥é—®é¢˜
- **å‘½å**ï¼š`hotfix/é—®é¢˜æè¿°`
- **æ¥æº**ï¼šä» main åˆ†æ”¯åˆ›å»º
- **åˆå¹¶**ï¼šåˆå¹¶åˆ° main å’Œ develop åˆ†æ”¯

```bash
# åˆ›å»ºä¿®å¤åˆ†æ”¯
git checkout main
git pull origin main
git checkout -b hotfix/fix-memory-leak

# ä¿®å¤é—®é¢˜
# ... ä¿®å¤ä»£ç  ...

# æäº¤æ›´æ”¹
git add .
git commit -m "fix(node): resolve memory leak in packet forwarding"

# æ¨é€åˆ°è¿œç¨‹
git push -u origin hotfix/fix-memory-leak
```

#### 2.2.5 å‘å¸ƒåˆ†æ”¯ï¼ˆrelease/*ï¼‰

- **ç”¨é€”**ï¼šå‡†å¤‡å‘å¸ƒæ–°ç‰ˆæœ¬
- **å‘½å**ï¼š`release/vX.Y.Z`
- **æ¥æº**ï¼šä» develop åˆ†æ”¯åˆ›å»º
- **åˆå¹¶**ï¼šåˆå¹¶åˆ° main å’Œ develop åˆ†æ”¯

```bash
# åˆ›å»ºå‘å¸ƒåˆ†æ”¯
git checkout develop
git pull origin develop
git checkout -b release/v1.0.0

# å‡†å¤‡å‘å¸ƒ
# ... æ›´æ–°ç‰ˆæœ¬å·ã€æ–‡æ¡£ ...

# æäº¤æ›´æ”¹
git add .
git commit -m "chore(release): prepare for v1.0.0"

# æ¨é€åˆ°è¿œç¨‹
git push -u origin release/v1.0.0
```

### 2.3 åˆ†æ”¯ä¿æŠ¤è§„åˆ™

#### 2.3.1 ä¸»åˆ†æ”¯ï¼ˆmainï¼‰ä¿æŠ¤

- ç¦æ­¢ç›´æ¥æ¨é€
- éœ€è¦ Pull Request
- è‡³å°‘ 1 ä¸ªå®¡æŸ¥é€šè¿‡
- å¿…é¡»é€šè¿‡ CI æ£€æŸ¥
- å¿…é¡»é€šè¿‡æµ‹è¯•

#### 2.3.2 å¼€å‘åˆ†æ”¯ï¼ˆdevelopï¼‰ä¿æŠ¤

- ç¦æ­¢ç›´æ¥æ¨é€
- éœ€è¦ Pull Request
- è‡³å°‘ 1 ä¸ªå®¡æŸ¥é€šè¿‡
- å¿…é¡»é€šè¿‡ CI æ£€æŸ¥
- å¿…é¡»é€šè¿‡æµ‹è¯•

## 3. ä»£ç åˆå¹¶æµç¨‹

### 3.1 Pull Request æµç¨‹

#### 3.1.1 åˆ›å»º Pull Request

1. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**
   ```bash
   git checkout -b feature/new-feature
   ```

2. **å¼€å‘å’Œæäº¤**
   ```bash
   git add .
   git commit -m "feat: add new feature"
   git push -u origin feature/new-feature
   ```

3. **åˆ›å»º Pull Request**
   - åœ¨ GitHub ä¸Šåˆ›å»º PR
   - é€‰æ‹©ç›®æ ‡åˆ†æ”¯ï¼ˆdevelop æˆ– mainï¼‰
   - å¡«å†™ PR æè¿°
   - å…³è”ç›¸å…³çš„ Issue

#### 3.1.2 PR æè¿°æ¨¡æ¿

```markdown
## å˜æ›´ç±»å‹
- [ ] æ–°åŠŸèƒ½
- [ ] Bug ä¿®å¤
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] ä»£ç é‡æ„
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æµ‹è¯•

## å˜æ›´è¯´æ˜
ç®€è¦æè¿°æœ¬æ¬¡å˜æ›´çš„å†…å®¹å’Œç›®çš„ã€‚

## å˜æ›´è¯¦æƒ…
- æ·»åŠ äº†åŠŸèƒ½ X
- ä¿®å¤äº†é—®é¢˜ Y
- ä¼˜åŒ–äº†æ€§èƒ½ Z

## æµ‹è¯•
- [ ] å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ‰‹åŠ¨æµ‹è¯•é€šè¿‡

## ç›¸å…³ Issue
Closes #123

## æˆªå›¾ï¼ˆå¦‚é€‚ç”¨ï¼‰
æ·»åŠ æˆªå›¾æˆ– GIF æ¼”ç¤ºå˜æ›´æ•ˆæœã€‚

## æ£€æŸ¥æ¸…å•
- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] æ·»åŠ äº†å¿…è¦çš„æµ‹è¯•
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] æ²¡æœ‰å¼•å…¥æ–°çš„è­¦å‘Š
```

#### 3.1.3 ä»£ç å®¡æŸ¥

1. **è‡ªåŠ¨æ£€æŸ¥**
   - CI/CD è‡ªåŠ¨è¿è¡Œ
   - ä»£ç æ ¼å¼æ£€æŸ¥
   - é™æ€ä»£ç åˆ†æ
   - æµ‹è¯•è¿è¡Œ

2. **äººå·¥å®¡æŸ¥**
   - è‡³å°‘ä¸€åç»´æŠ¤è€…å®¡æŸ¥
   - æå‡ºä¿®æ”¹å»ºè®®
   - è®¨è®ºæŠ€æœ¯æ–¹æ¡ˆ

3. **ä¿®æ”¹å’Œå®Œå–„**
   - æ ¹æ®åé¦ˆä¿®æ”¹ä»£ç 
   - æ›´æ–°æµ‹è¯•
   - å“åº”å®¡æŸ¥æ„è§

#### 3.1.4 åˆå¹¶ Pull Request

1. **åˆå¹¶æ–¹å¼**
   - **Squash and merge**ï¼šæ¨èï¼Œä¿æŒå†å²æ¸…æ™°
   - **Merge commit**ï¼šä¿ç•™å®Œæ•´å†å²
   - **Rebase and merge**ï¼šä¿æŒçº¿æ€§å†å²

2. **åˆå¹¶æ¡ä»¶**
   - æ‰€æœ‰å®¡æŸ¥é€šè¿‡
   - CI/CD æ£€æŸ¥é€šè¿‡
   - æ²¡æœ‰å†²çª

3. **åˆå¹¶åæ“ä½œ**
   - åˆ é™¤åŠŸèƒ½åˆ†æ”¯
   - æ›´æ–°æœ¬åœ°ä»“åº“
   - é€šçŸ¥ç›¸å…³äººå‘˜

```bash
# åˆ é™¤è¿œç¨‹åˆ†æ”¯
git push origin --delete feature/new-feature

# åˆ é™¤æœ¬åœ°åˆ†æ”¯
git branch -d feature/new-feature

# æ›´æ–°æœ¬åœ°ä»“åº“
git checkout develop
git pull origin develop
```

### 3.2 å†²çªè§£å†³

#### 3.2.1 è¯†åˆ«å†²çª

```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git checkout develop
git pull origin develop

# å°è¯•åˆå¹¶
git merge feature/new-feature

# å¦‚æœæœ‰å†²çªï¼ŒGit ä¼šæç¤º
```

#### 3.2.2 è§£å†³å†²çª

```bash
# 1. æŸ¥çœ‹å†²çªæ–‡ä»¶
git status

# 2. ç¼–è¾‘å†²çªæ–‡ä»¶
# æ ‡è®°ä¸ºå†²çªçš„æ–‡ä»¶ä¼šåŒ…å«ï¼š
# <<<<<<< HEAD
# å½“å‰åˆ†æ”¯çš„ä»£ç 
# =======
# åˆå¹¶åˆ†æ”¯çš„ä»£ç 
# >>>>>>> feature/new-feature

# 3. æ‰‹åŠ¨è§£å†³å†²çª
# ä¿ç•™éœ€è¦çš„ä»£ç ï¼Œåˆ é™¤æ ‡è®°

# 4. æ ‡è®°å†²çªå·²è§£å†³
git add <conflicted-file>

# 5. å®Œæˆåˆå¹¶
git commit

# 6. æ¨é€æ›´æ”¹
git push origin develop
```

#### 3.2.3 ä½¿ç”¨åˆå¹¶å·¥å…·

```bash
# ä½¿ç”¨ Git å†…ç½®åˆå¹¶å·¥å…·
git mergetool

# æˆ–ä½¿ç”¨å¤–éƒ¨å·¥å…·
git config --global merge.tool vimdiff
git mergetool
```

## 4. ç‰ˆæœ¬å·å‘½åè§„åˆ™

### 4.1 è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemantic Versioningï¼‰

EdgeVPN éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼Œç‰ˆæœ¬å·æ ¼å¼ä¸ºï¼š`MAJOR.MINOR.PATCH`

#### 4.1.1 ç‰ˆæœ¬å·ç»„æˆ

| éƒ¨åˆ† | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| MAJOR | ä¸»ç‰ˆæœ¬å·ï¼Œä¸å…¼å®¹çš„ API ä¿®æ”¹ | 1.0.0 â†’ 2.0.0 |
| MINOR | æ¬¡ç‰ˆæœ¬å·ï¼Œå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ | 1.0.0 â†’ 1.1.0 |
| PATCH | ä¿®è®¢å·ï¼Œå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ | 1.0.0 â†’ 1.0.1 |

#### 4.1.2 ç‰ˆæœ¬å·ç¤ºä¾‹

```
v1.0.0 - åˆå§‹ç‰ˆæœ¬
v1.1.0 - æ·»åŠ  IPv6 æ”¯æŒï¼ˆåŠŸèƒ½æ–°å¢ï¼‰
v1.1.1 - ä¿®å¤ DNS è§£æé—®é¢˜ï¼ˆé—®é¢˜ä¿®æ­£ï¼‰
v2.0.0 - é‡æ„ API æ¥å£ï¼ˆä¸å…¼å®¹ä¿®æ”¹ï¼‰
```

### 4.2 é¢„å‘å¸ƒç‰ˆæœ¬

#### 4.2.1 é¢„å‘å¸ƒæ ‡è¯†ç¬¦

| æ ‡è¯†ç¬¦ | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| alpha | å†…éƒ¨æµ‹è¯•ç‰ˆæœ¬ | v1.0.0-alpha.1 |
| beta | å…¬å¼€æµ‹è¯•ç‰ˆæœ¬ | v1.0.0-beta.1 |
| rc | å€™é€‰å‘å¸ƒç‰ˆæœ¬ | v1.0.0-rc.1 |

#### 4.2.2 é¢„å‘å¸ƒç‰ˆæœ¬ç¤ºä¾‹

```
v1.0.0-alpha.1 - ç¬¬ä¸€ä¸ª alpha ç‰ˆæœ¬
v1.0.0-alpha.2 - ç¬¬äºŒä¸ª alpha ç‰ˆæœ¬
v1.0.0-beta.1 - ç¬¬ä¸€ä¸ª beta ç‰ˆæœ¬
v1.0.0-rc.1 - ç¬¬ä¸€ä¸ªå€™é€‰ç‰ˆæœ¬
v1.0.0 - æ­£å¼ç‰ˆæœ¬
```

### 4.3 ç‰ˆæœ¬å‘å¸ƒæµç¨‹

#### 4.3.1 å‡†å¤‡å‘å¸ƒ

```bash
# 1. åˆ›å»ºå‘å¸ƒåˆ†æ”¯
git checkout develop
git pull origin develop
git checkout -b release/v1.0.0

# 2. æ›´æ–°ç‰ˆæœ¬å·
# ç¼–è¾‘ version.go æˆ–ç›¸å…³æ–‡ä»¶
# å°†ç‰ˆæœ¬å·æ›´æ–°ä¸º v1.0.0

# 3. æ›´æ–° CHANGELOG
# æ·»åŠ ç‰ˆæœ¬å‘å¸ƒè¯´æ˜

# 4. æäº¤æ›´æ”¹
git add .
git commit -m "chore(release): prepare for v1.0.0"

# 5. æ¨é€å‘å¸ƒåˆ†æ”¯
git push -u origin release/v1.0.0
```

#### 4.3.2 æµ‹è¯•å‘å¸ƒ

```bash
# 1. æ„å»ºå‘å¸ƒç‰ˆæœ¬
goreleaser build --clean --snapshot

# 2. æµ‹è¯•æ„å»ºäº§ç‰©
./dist/edgevpn-v1.0.0-linux-amd64 --version

# 3. è¿è¡Œé›†æˆæµ‹è¯•
go test ./...
```

#### 4.3.3 åˆå¹¶å‘å¸ƒ

```bash
# 1. åˆå¹¶åˆ° main
git checkout main
git merge release/v1.0.0

# 2. åˆ›å»ºæ ‡ç­¾
git tag -a v1.0.0 -m "Release v1.0.0"

# 3. æ¨é€æ ‡ç­¾
git push origin v1.0.0

# 4. åˆå¹¶åˆ° develop
git checkout develop
git merge release/v1.0.0

# 5. æ¨é€æ›´æ”¹
git push origin develop

# 6. åˆ é™¤å‘å¸ƒåˆ†æ”¯
git branch -d release/v1.0.0
git push origin --delete release/v1.0.0
```

#### 4.3.4 å‘å¸ƒç‰ˆæœ¬

```bash
# ä½¿ç”¨ GoReleaser å‘å¸ƒ
goreleaser release

# æˆ–æ‰‹åŠ¨åœ¨ GitHub ä¸Šåˆ›å»º Release
# 1. è®¿é—® https://github.com/mudler/edgevpn/releases/new
# 2. é€‰æ‹©æ ‡ç­¾ v1.0.0
# 3. å¡«å†™å‘å¸ƒè¯´æ˜
# 4. ä¸Šä¼ æ„å»ºäº§ç‰©
# 5. å‘å¸ƒ
```

### 4.4 å˜æ›´æ—¥å¿—ï¼ˆCHANGELOGï¼‰

#### 4.4.1 å˜æ›´æ—¥å¿—æ ¼å¼

```markdown
# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added
- æ–°åŠŸèƒ½æè¿°

### Changed
- å˜æ›´æè¿°

### Deprecated
- åºŸå¼ƒåŠŸèƒ½æè¿°

### Removed
- ç§»é™¤åŠŸèƒ½æè¿°

### Fixed
- ä¿®å¤é—®é¢˜æè¿°

### Security
- å®‰å…¨ä¿®å¤æè¿°

## [1.0.0] - 2026-02-13

### Added
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒ IPv4 å’Œ IPv6
- P2P ç½‘ç»œåŠŸèƒ½
- åŒºå—é“¾è´¦æœ¬
- DNS è§£ææœåŠ¡

### Security
- ä½¿ç”¨ TLS åŠ å¯†é€šä¿¡
- å®ç°ä¿¡ä»»åŒºåŸŸè®¤è¯

[Unreleased]: https://github.com/mudler/edgevpn/compare/v1.0.0...HEAD
[1.0.0]: https://github.com/mudler/edgevpn/releases/tag/v1.0.0
```

#### 4.4.2 å˜æ›´ç±»å‹è¯´æ˜

| ç±»å‹ | è¯´æ˜ |
|------|------|
| Added | æ–°å¢åŠŸèƒ½ |
| Changed | åŠŸèƒ½å˜æ›´ |
| Deprecated | åºŸå¼ƒåŠŸèƒ½ |
| Removed | ç§»é™¤åŠŸèƒ½ |
| Fixed | é—®é¢˜ä¿®å¤ |
| Security | å®‰å…¨ä¿®å¤ |

## 5. Git å·¥ä½œæµ

### 5.1 æ—¥å¸¸å¼€å‘æµç¨‹

#### 5.1.1 å¼€å§‹æ–°åŠŸèƒ½

```bash
# 1. æ›´æ–°æœ¬åœ°ä»“åº“
git checkout develop
git pull origin develop

# 2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/new-feature

# 3. å¼€å‘åŠŸèƒ½
# ... ç¼–å†™ä»£ç  ...

# 4. æäº¤æ›´æ”¹
git add .
git commit -m "feat: add new feature"

# 5. æ¨é€åˆ°è¿œç¨‹
git push -u origin feature/new-feature
```

#### 5.1.2 æäº¤ä»£ç 

```bash
# æŸ¥çœ‹æ›´æ”¹
git status

# æ·»åŠ æ–‡ä»¶
git add <file>
git add .

# æäº¤
git commit -m "type(scope): description"

# æ¨é€
git push
```

### 5.2 ç´§æ€¥ä¿®å¤æµç¨‹

#### 5.2.1 åˆ›å»ºä¿®å¤åˆ†æ”¯

```bash
# 1. ä» main åˆ›å»ºä¿®å¤åˆ†æ”¯
git checkout main
git pull origin main
git checkout -b hotfix/fix-critical-bug

# 2. ä¿®å¤é—®é¢˜
# ... ä¿®å¤ä»£ç  ...

# 3. æäº¤æ›´æ”¹
git add .
git commit -m "fix: resolve critical bug"

# 4. æ¨é€åˆ°è¿œç¨‹
git push -u origin hotfix/fix-critical-bug
```

#### 5.2.2 åˆå¹¶ä¿®å¤

```bash
# 1. åˆå¹¶åˆ° main
git checkout main
git merge hotfix/fix-critical-bug

# 2. åˆ›å»ºæ ‡ç­¾
git tag -a v1.0.1 -m "Hotfix v1.0.1"

# 3. æ¨é€æ ‡ç­¾
git push origin v1.0.1

# 4. åˆå¹¶åˆ° develop
git checkout develop
git merge hotfix/fix-critical-bug

# 5. æ¨é€æ›´æ”¹
git push origin develop

# 6. åˆ é™¤ä¿®å¤åˆ†æ”¯
git branch -d hotfix/fix-critical-bug
git push origin --delete hotfix/fix-critical-bug
```

## 6. æäº¤è§„èŒƒ

### 6.1 æäº¤ä¿¡æ¯æ ¼å¼

ä½¿ç”¨çº¦å®šå¼æäº¤ï¼ˆConventional Commitsï¼‰æ ¼å¼ï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

### 6.2 æäº¤ç±»å‹

| ç±»å‹ | è¯´æ˜ |
|------|------|
| feat | æ–°åŠŸèƒ½ |
| fix | ä¿®å¤ bug |
| docs | æ–‡æ¡£æ›´æ–° |
| style | ä»£ç æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰ |
| refactor | é‡æ„ï¼ˆæ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰ |
| perf | æ€§èƒ½ä¼˜åŒ– |
| test | å¢åŠ æµ‹è¯• |
| chore | æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨ |
| ci | CI/CD é…ç½®æ–‡ä»¶å’Œè„šæœ¬çš„å˜åŠ¨ |
| revert | å›é€€å…ˆå‰çš„æäº¤ |

### 6.3 æäº¤ç¤ºä¾‹

```bash
# æ–°åŠŸèƒ½
git commit -m "feat(node): add support for IPv6 addresses"

# ä¿®å¤ bug
git commit -m "fix(blockchain): resolve race condition in ledger sync"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs(api): update API documentation for v2.0"

# é‡æ„
git commit -m "refactor(services): simplify service registration logic"

# æ€§èƒ½ä¼˜åŒ–
git commit -m "perf(vpn): reduce memory allocation in packet forwarding"

# æµ‹è¯•
git commit -m "test(node): add unit tests for node discovery"

# æ„å»º
git commit -m "chore(deps): update libp2p to v0.30.0"

# CI/CD
git commit -m "ci(github): add workflow for automated testing"

# å›é€€
git commit -m "revert: revert commit abc1234"
```

### 6.4 æäº¤æœ€ä½³å®è·µ

- **åŸå­æäº¤**ï¼šæ¯æ¬¡æäº¤åªåšä¸€ä»¶äº‹
- **æ¸…æ™°æè¿°**ï¼šæäº¤ä¿¡æ¯åº”è¯¥æ¸…æ™°æè¿°å˜æ›´
- **åŠæ—¶æäº¤**ï¼šé¢‘ç¹æäº¤ï¼Œé¿å…å¤§é‡å˜æ›´å †ç§¯
- **ä¸è¦æäº¤ä¸´æ—¶æ–‡ä»¶**ï¼šä½¿ç”¨ .gitignore æ’é™¤ä¸´æ—¶æ–‡ä»¶
- **ä¸è¦æäº¤æ•æ„Ÿä¿¡æ¯**ï¼šä¸è¦æäº¤å¯†é’¥ã€å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯

## 7. åˆ†æ”¯å‘½åè§„èŒƒ

### 7.1 åŠŸèƒ½åˆ†æ”¯

```
feature/<feature-name>
```

ç¤ºä¾‹ï¼š
- `feature/add-ipv6-support`
- `feature/implement-dns-forwarding`
- `feature/add-metrics-api`

### 7.2 ä¿®å¤åˆ†æ”¯

```
hotfix/<issue-description>
```

ç¤ºä¾‹ï¼š
- `hotfix/fix-memory-leak`
- `hotfix/resolve-connection-timeout`
- `hotfix/fix-dns-resolution`

### 7.3 å‘å¸ƒåˆ†æ”¯

```
release/vX.Y.Z
```

ç¤ºä¾‹ï¼š
- `release/v1.0.0`
- `release/v1.1.0`
- `release/v2.0.0`

### 7.4 å…¶ä»–åˆ†æ”¯

- `docs/*` - æ–‡æ¡£æ›´æ–°
- `refactor/*` - ä»£ç é‡æ„
- `test/*` - æµ‹è¯•ç›¸å…³
- `ci/*` - CI/CD é…ç½®

## 8. ç‰ˆæœ¬å›é€€

### 8.1 å›é€€æäº¤

```bash
# å›é€€å•ä¸ªæäº¤ï¼ˆä¿ç•™å†å²ï¼‰
git revert <commit-hash>

# å›é€€å¤šä¸ªæäº¤
git revert <commit-hash1> <commit-hash2>

# å›é€€åˆ°æŒ‡å®šæäº¤ï¼ˆåˆ é™¤å†å²ï¼‰
git reset --hard <commit-hash>
```

### 8.2 å›é€€ç‰ˆæœ¬

```bash
# åˆ é™¤è¿œç¨‹æ ‡ç­¾
git push origin --delete v1.0.0

# åˆ é™¤æœ¬åœ°æ ‡ç­¾
git tag -d v1.0.0

# åˆ›å»ºæ–°æ ‡ç­¾
git tag -a v1.0.1 -m "New release v1.0.1"

# æ¨é€æ–°æ ‡ç­¾
git push origin v1.0.1
```

## 9. å›¢é˜Ÿåä½œ

### 9.1 ä»£ç å®¡æŸ¥

- æ¯ä¸ª PR å¿…é¡»ç»è¿‡è‡³å°‘ä¸€äººå®¡æŸ¥
- å®¡æŸ¥è€…åº”è¯¥ä»”ç»†æ£€æŸ¥ä»£ç è´¨é‡
- æä¾›å»ºè®¾æ€§çš„åé¦ˆ
- åŠæ—¶å“åº”å®¡æŸ¥æ„è§

### 9.2 å†²çªè§£å†³

- å°½æ—©åˆå¹¶ä»£ç ï¼Œå‡å°‘å†²çª
- åŠæ—¶è§£å†³å†²çª
- ä¸ç›¸å…³äººå‘˜æ²Ÿé€š
- ä¿æŒä»£ç å†å²æ¸…æ™°

### 9.3 æ²Ÿé€šåä½œ

- ä½¿ç”¨ Issue è·Ÿè¸ªé—®é¢˜å’ŒåŠŸèƒ½
- ä½¿ç”¨ Pull Request è¿›è¡Œä»£ç å®¡æŸ¥
- ä½¿ç”¨ GitHub Discussions è¿›è¡Œè®¨è®º
- å®šæœŸåŒæ­¥è¿›åº¦

## 10. å·¥å…·å’Œè‡ªåŠ¨åŒ–

### 10.1 Git é’©å­

#### 10.1.1 Pre-commit é’©å­

```bash
#!/bin/sh
# .git/hooks/pre-commit

# æ ¼å¼åŒ–ä»£ç 
gofmt -w .
goimports -w .

# è¿è¡Œ linter
golangci-lint run

# è¿è¡Œæµ‹è¯•
go test ./...
```

#### 10.1.2 Pre-push é’©å­

```bash
#!/bin/sh
# .git/hooks/pre-push

# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
go test -race -cover ./...
```

### 10.2 è‡ªåŠ¨åŒ–å·¥å…·

#### 10.2.1 GitHub Actions

- è‡ªåŠ¨è¿è¡Œæµ‹è¯•
- è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ
- è‡ªåŠ¨æ£€æŸ¥ä»£ç è´¨é‡
- è‡ªåŠ¨éƒ¨ç½²

#### 10.2.2 Dependabot

- è‡ªåŠ¨æ›´æ–°ä¾èµ–
- åˆ›å»º PR è¿›è¡Œä¾èµ–æ›´æ–°
- æ£€æŸ¥å®‰å…¨æ¼æ´

## 11. å®‰å…¨è€ƒè™‘

### 11.1 æ•æ„Ÿä¿¡æ¯

- ä¸è¦æäº¤å¯†é’¥ã€å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯
- ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯
- ä½¿ç”¨ `.env` æ–‡ä»¶ï¼ˆåŠ å…¥ .gitignoreï¼‰
- ä½¿ç”¨å¯†é’¥ç®¡ç†ç³»ç»Ÿ

### 11.2 è®¿é—®æ§åˆ¶

- ä½¿ç”¨ GitHub Teams ç®¡ç†è®¿é—®æƒé™
- é™åˆ¶ä¸»åˆ†æ”¯çš„å†™å…¥æƒé™
- ä½¿ç”¨åˆ†æ”¯ä¿æŠ¤è§„åˆ™
- å®¡æŸ¥ä»£ç åˆå¹¶

### 11.3 å®¡è®¡æ—¥å¿—

- è®°å½•æ‰€æœ‰ä»£ç å˜æ›´
- è®°å½•ç‰ˆæœ¬å‘å¸ƒ
- è®°å½•å®‰å…¨äº‹ä»¶
- å®šæœŸå®¡è®¡è®¿é—®æ—¥å¿—

## 12. æ€»ç»“

éµå¾ªæœ¬ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥æœ‰åŠ©äºä¿æŒä»£ç è´¨é‡ã€æé«˜å›¢é˜Ÿåä½œæ•ˆç‡å¹¶ç¡®ä¿ç‰ˆæœ¬å‘å¸ƒçš„ç¨³å®šæ€§ã€‚æ‰€æœ‰å¼€å‘è€…éƒ½åº”è¯¥ç†Ÿæ‚‰å¹¶éµå®ˆè¿™äº›ç­–ç•¥ã€‚
