# EdgeVPN 技术栈说明

## 1. 概述

EdgeVPN 是一个基于 Go 语言开发的去中心化 VPN 解决方案，采用现代化的技术栈构建，充分利用了 libp2p 生态系统和 Go 语言的并发特性。本文档详细说明项目使用的技术组件及其版本信息。

## 2. 编程语言

### 2.1 Go 语言

- **版本**：Go 1.24.6 / 1.25.6
- **工具链**：go1.25.6
- **编译模式**：静态编译 (CGO_ENABLED=0)

**选择理由**：
- 原生支持并发，适合 P2P 网络编程
- 静态编译，便于跨平台部署
- 丰富的标准库和第三方库
- 优秀的性能和内存管理

## 3. 核心框架和库

### 3.1 libp2p 生态系统

#### 3.1.1 go-libp2p

- **版本**：v0.45.0
- **用途**：P2P 网络核心库
- **功能**：
  - 对等节点发现和连接
  - 多种传输协议支持
  - NAT 穿透
  - 流管理

#### 3.1.2 go-libp2p-kad-dht

- **版本**：v0.36.0
- **用途**：Kademlia DHT 实现
- **功能**：
  - 分布式哈希表
  - 对等节点发现
  - 内容路由

#### 3.1.3 go-libp2p-pubsub

- **版本**：v0.15.0
- **用途**：发布订阅消息系统
- **功能**：
  - GossipSub 路由协议
  - 消息广播
  - 主题管理

#### 3.1.4 multiformats/go-multiaddr

- **版本**：v0.16.1
- **用途**：多地址格式支持
- **功能**：
  - 统一的网络地址表示
  - 多协议地址编码

### 3.2 Web 框架

#### 3.2.1 labstack/echo/v4

- **版本**：v4.13.3
- **用途**：REST API 框架
- **功能**：
  - HTTP 路由
  - 中间件支持
  - JSON 序列化

### 3.3 网络协议

#### 3.3.1 miekg/dns

- **版本**：v1.1.68
- **用途**：DNS 协议实现
- **功能**：
  - DNS 查询和响应
  - DNS 服务器实现

#### 3.3.2 google/gopacket

- **版本**：v1.1.19
- **用途**：数据包捕获和解析
- **功能**：
  - 网络数据包解析
  - 协议栈支持

#### 3.3.3 songgao/packets

- **版本**：v0.0.0-20160404182456-549a10cd4091
- **用途**：以太网数据包处理
- **功能**：
  - 以太网帧处理
  - 数据包读写

#### 3.3.4 vishvananda/netlink

- **版本**：v1.3.1
- **用途**：网络接口管理
- **功能**：
  - 虚拟网络接口创建
  - 路由表管理

### 3.4 VPN 实现

#### 3.4.1 mudler/water

- **版本**：v0.0.0-20250808092830-dd90dcf09025
- **用途**：TUN/TAP 设备接口
- **功能**：
  - 虚拟网络接口创建
  - 数据包读写

#### 3.4.2 golang.zx2c4.com/wireguard/windows

- **版本**：v0.5.3
- **用途**：Windows WireGuard 支持
- **功能**：
  - Windows 平台 VPN 支持

### 3.5 加密和安全

#### 3.5.1 creachadair/otp

- **版本**：v0.5.0
- **用途**：OTP (一次性密码) 实现
- **功能**：
  - TOTP 算法
  - 时间同步令牌

#### 3.5.2 decred/dcrd/dcrec/secp256k1/v4

- **版本**：v4.4.0
- **用途**：椭圆曲线加密
- **功能**：
  - ECDSA 签名
  - secp256k1 曲线

#### 3.5.3 davidlazar/go-crypto

- **版本**：v0.0.0-20200604182044-b73af7476f6c
- **用途**：加密工具库
- **功能**：
  - 加密算法实现

### 3.6 日志和监控

#### 3.6.1 go.uber.org/zap

- **版本**：v1.27.0
- **用途**：结构化日志
- **功能**：
  - 高性能日志记录
  - 结构化日志输出

#### 3.6.2 ipfs/go-log

- **版本**：v1.0.5 / v2.9.0
- **用途**：IPFS 日志系统
- **功能**：
  - 日志级别控制
  - 日志输出配置

#### 3.6.3 google/pprof

- **版本**：v0.0.0-20250403155104-27863c87afa6
- **用途**：性能分析
- **功能**：
  - CPU 性能分析
  - 内存分析

### 3.7 数据存储

#### 3.7.1 peterbourgon/diskv

- **版本**：v2.0.1+incompatible
- **用途**：磁盘键值存储
- **功能**：
  - 简单的文件系统存储
  - 键值对存储

#### 3.7.2 hashicorp/golang-lru

- **版本**：v1.0.2
- **用途**：LRU 缓存
- **功能**：
  - 最近最少使用缓存
  - 缓存大小控制

### 3.8 工具库

#### 3.8.1 urfave/cli/v2

- **版本**：v2.27.7
- **用途**：命令行界面
- **功能**：
  - CLI 参数解析
  - 子命令支持

#### 3.8.2 c-robinson/iplib

- **版本**：v1.0.8
- **用途**：IP 地址库
- **功能**：
  - IP 地址操作
  - 子网计算

#### 3.8.3 Masterminds/sprig/v3

- **版本**：v3.3.0
- **用途**：模板函数库
- **功能**：
  - 模板辅助函数

#### 3.8.4 gopkg.in/yaml.v2

- **版本**：v2.4.0
- **用途**：YAML 解析
- **功能**：
  - YAML 配置文件解析

#### 3.8.5 pkg/errors

- **版本**：v0.9.1
- **用途**：错误处理
- **功能**：
  - 错误堆栈跟踪
  - 错误包装

#### 3.8.6 benbjohnson/clock

- **版本**：v1.3.5
- **用途**：时钟模拟
- **功能**：
  - 时间控制
  - 测试支持

#### 3.8.7 cenkalti/backoff/v4

- **版本**：v4.3.0
- **用途**：退避算法
- **功能**：
  - 指数退避
  - 重试策略

#### 3.8.8 dario.cat/mergo

- **版本**：v1.0.1
- **用途**：结构体合并
- **功能**：
  - 配置合并
  - 结构体操作

### 3.9 测试框架

#### 3.9.1 onsi/ginkgo/v2

- **版本**：v2.25.1
- **用途**：BDD 测试框架
- **功能**：
  - 行为驱动开发
  - 测试套件管理

#### 3.9.2 onsi/gomega

- **版本**：v1.37.0
- **用途**：匹配器库
- **功能**：
  - 断言匹配器
  - 测试辅助

### 3.10 进程管理

#### 3.10.1 mudler/go-processmanager

- **版本**：v0.0.0-20240820160718-8b802d3ecf82
- **用途**：进程管理
- **功能**：
  - 子进程管理
  - 进程生命周期控制

## 4. 前端技术栈

### 4.1 Web 界面

#### 4.1.1 Alpine.js

- **用途**：轻量级 JavaScript 框架
- **功能**：
  - 响应式数据绑定
  - 组件化开发

#### 4.1.2 Tailwind CSS

- **用途**：CSS 框架
- **功能**：
  - 实用类优先
  - 响应式设计

#### 4.1.3 ApexCharts

- **用途**：图表库
- **功能**：
  - 数据可视化
  - 交互式图表

## 5. 文档技术栈

### 5.1 Hugo

- **版本**：v0.146.0
- **用途**：静态网站生成器
- **功能**：
  - 文档网站生成
  - 主题支持

### 5.2 Docsy 主题

- **用途**：Hugo 文档主题
- **功能**：
  - 技术文档模板
  - 响应式布局

## 6. 构建和部署工具

### 6.1 GoReleaser

- **版本**：v2.0.1
- **用途**：Go 项目发布工具
- **功能**：
  - 多平台编译
  - 自动化发布

### 6.2 Docker

- **用途**：容器化部署
- **功能**：
  - 容器镜像构建
  - 容器编排

### 6.3 Docker Compose

- **用途**：多容器编排
- **功能**：
  - 服务编排
  - 环境配置

## 7. CI/CD 工具

### 7.1 GitHub Actions

- **用途**：持续集成/持续部署
- **工作流**：
  - 构建测试
  - 自动发布
  - 文档部署
  - 镜像构建

### 7.2 Dependabot

- **用途**：依赖更新
- **功能**：
  - 自动依赖更新
  - 安全补丁

## 8. 开发工具

### 8.1 Git

- **用途**：版本控制
- **功能**：
  - 代码版本管理
  - 分支管理

### 8.2 Go Modules

- **用途**：依赖管理
- **功能**：
  - 依赖版本控制
  - 依赖下载

## 9. 操作系统支持

### 9.1 Linux

- **架构**：amd64, arm, 386, arm64
- **特性**：
  - 完整功能支持
  - 最佳性能

### 9.2 Windows

- **架构**：amd64, 386, arm64
- **特性**：
  - WireGuard 支持
  - 服务模式

### 9.3 macOS

- **架构**：amd64, arm64
- **特性**：
  - 原生支持
  - GUI 应用

### 9.4 FreeBSD

- **架构**：amd64
- **特性**：
  - 基本功能支持

## 10. 网络协议

### 10.1 传输协议

- **TCP**：可靠传输
- **UDP**：快速传输
- **WebRTC**：浏览器支持
- **QUIC**：现代传输

### 10.2 发现协议

- **mDNS**：本地网络发现
- **DHT**：分布式发现
- **Rendezvous**：会合点发现

### 10.3 路由协议

- **Kademlia**：DHT 路由
- **GossipSub**：消息路由

## 11. 数据格式

### 11.1 配置格式

- **YAML**：配置文件
- **JSON**：API 数据
- **Base64**：令牌编码

### 11.2 序列化

- **Protocol Buffers**：libp2p 消息
- **JSON**：API 响应

## 12. 安全机制

### 12.1 加密算法

- **AES**：数据加密
- **ECDSA**：数字签名
- **SHA256**：哈希计算

### 12.2 认证机制

- **TLS**：传输层安全
- **OTP**：一次性密码
- **ECDSA**：椭圆曲线签名

## 13. 性能优化

### 13.1 并发模型

- **Goroutines**：轻量级线程
- **Channels**：消息传递
- **WaitGroups**：同步机制

### 13.2 内存管理

- **对象池**：减少 GC 压力
- **缓存**：LRU 缓存
- **内存复用**：减少分配

## 14. 监控和调试

### 14.1 性能分析

- **pprof**：CPU/内存分析
- **trace**：执行跟踪
- **metrics**：性能指标

### 14.2 日志记录

- **zap**：结构化日志
- **log levels**：日志级别
- **rotation**：日志轮转

## 15. 版本兼容性

### 15.1 Go 版本

- **最低要求**：Go 1.24
- **推荐版本**：Go 1.25
- **工具链**：go1.25.6

### 15.2 依赖版本

- **libp2p**：v0.45.0
- **Echo**：v4.13.3
- **其他**：详见 go.mod

## 16. 许可证

### 16.1 项目许可证

- **主项目**：Apache License 2.0
- **服务组件**：GPL v3

### 16.2 依赖许可证

- **libp2p**：MIT/Apache 2.0
- **Echo**：MIT
- **其他**：详见各依赖

## 17. 总结

EdgeVPN 采用现代化的技术栈，充分利用了 Go 语言的并发特性和 libp2p 的 P2P 能力。通过精心选择的技术组件，实现了高性能、安全可靠的去中心化网络解决方案。技术栈的模块化设计使得项目易于维护和扩展，为未来的功能增强提供了良好的基础。
